
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <!-- ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë” ê´€ëŒ€í•œ CSP ì‚¬ìš© -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; script-src-elem 'self' 'unsafe-inline' 'unsafe-eval' *; worker-src 'self' blob:; style-src 'self' 'unsafe-inline' *; img-src 'self' data: *; connect-src 'self' * wss: ws: https://datis.clowd.io https://aviationweather.gov; frame-src 'self' *; font-src 'self' data: *; object-src 'none'; base-uri 'self'; form-action 'self';" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- ìºì‹œ ì •ì±…ì€ ì„œë²„ í—¤ë”ë¡œ ê´€ë¦¬ -->
    <title>My KneeBoard - Flight Dashboard</title>
    
    <!-- í•´ì‹œ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ -->
    <script>
      console.log('ğŸš€ Flight Dashboard - í•´ì‹œ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ');
    </script>
    
    <!-- Favicon ì„¤ì • - ë¶ë§ˆí¬ í˜¸í™˜ì„± í–¥ìƒ -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icon-120x120.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icon-114x114.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icon-76x76.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icon-60x60.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/icon-57x57.png">
    
    <!-- PWA Configuration -->
    <meta name="theme-color" content="#3B82F6">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#3B82F6">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1F2937">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="My KneeBoard">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="My KneeBoard">
    <meta name="msapplication-TileColor" content="#3B82F6">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-orientations" content="portrait">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-startup-image" content="/icon-512x512.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/icon-512x512.png">
    <!-- Tailwind CSS CDN - ê°œë°œí™˜ê²½ì—ì„œ ì‚¬ìš© -->
    <!-- ê°œë°œ í™˜ê²½ì—ì„œë§Œ Tailwind CDN ì‚¬ìš© -->
    <script>
      // Tailwind CSS ê²½ê³  ì–µì œ
      const originalWarn = console.warn;
      console.warn = function(...args) {
        if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com should not be used in production')) {
          return; // Tailwind CDN ê²½ê³  ì–µì œ
        }
        originalWarn.apply(console, args);
      };

      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' || window.location.port === '5173') {
        // ê°œë°œ í™˜ê²½ì—ì„œë§Œ CDN ë¡œë“œ
        const script = document.createElement('script');
        script.src = 'https://cdn.tailwindcss.com';
        script.onload = function() {
          if (typeof tailwind !== 'undefined') {
            tailwind.config = {
              darkMode: 'class',
              theme: { extend: {} },
            }
            console.log('Tailwind CSS configured successfully (Development Mode)');
          }
        };
        script.onerror = function() {
          console.warn('Tailwind CSS CDN ë¡œë“œ ì‹¤íŒ¨');
        };
        document.head.appendChild(script);
      } else {
        // í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œë„ CDN ë¡œë“œ (ë¹Œë“œëœ CSS ë¯¸ì‚¬ìš©)
        const script = document.createElement('script');
        script.src = 'https://cdn.tailwindcss.com';
        script.onload = function() {
          if (typeof tailwind !== 'undefined') {
            tailwind.config = {
              darkMode: 'class',
              theme: { extend: {} },
            }
            console.log('Tailwind CSS configured successfully (Production Mode)');
          }
        };
        script.onerror = function() {
          console.warn('Tailwind CSS CDN ë¡œë“œ ì‹¤íŒ¨');
        };
        document.head.appendChild(script);
      }
    </script>
    <style>
      @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in-up { 
        animation: fade-in-up 0.3s ease-out forwards; 
      }
      
      /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
      .scrollbar-hide {
        -ms-overflow-style: none;  /* IE and Edge */
        -webkit-scrollbar-width: none;  /* Safari */
        scrollbar-width: none;  /* Firefox */
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;  /* Chrome, Safari and Opera */
      }
      
      /* ìŠ¤í¬ë¡¤ë°” í‘œì‹œ */
      .scrollbar-show {
        -ms-overflow-style: auto;
        -webkit-scrollbar-width: auto;  /* Safari */
        scrollbar-width: auto;  /* Firefox */
        position: relative;
      }
      .scrollbar-show::-webkit-scrollbar {
        display: block;
        width: 8px;
        position: fixed;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 9999;
      }
      .scrollbar-show::-webkit-scrollbar-track {
        background: transparent;
        position: fixed;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 9999;
      }
      .scrollbar-show::-webkit-scrollbar-thumb {
        background: rgba(209, 213, 219, 0.9);
        border-radius: 4px;
        position: fixed;
        right: 2px;
        min-height: 20px;
        z-index: 10000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      
      /* ë‹¤í¬ëª¨ë“œ ìŠ¤í¬ë¡¤ë°” */
      .dark .scrollbar-show::-webkit-scrollbar-thumb {
        background: rgba(75, 85, 99, 0.9);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }
      
      /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” - ìŠ¤í¬ë¡¤í•  ë•Œë§Œ ë‚˜íƒ€ë‚¨ */
      .custom-scrollbar {
        /* Safari */
        -webkit-scrollbar-width: thin;
        -webkit-scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
        /* Firefox */
        scrollbar-width: thin;
        scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
        transition: scrollbar-color 0.2s ease;
        /* í„°ì¹˜ ìŠ¤í¬ë¡¤ í™œì„±í™” */
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        /* í„°ì¹˜ ìŠ¤í¬ë¡¤ ê°•í™” */
        touch-action: pan-y;
        overscroll-behavior-y: contain;
      }
      
      .custom-scrollbar:hover {
        -webkit-scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
        scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
      }
      
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      
      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(156, 163, 175, 0.3);
        border-radius: 3px;
        transition: background 0.2s ease;
      }
      
      .custom-scrollbar:hover::-webkit-scrollbar-thumb {
        background: rgba(156, 163, 175, 0.5);
      }
      
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(156, 163, 175, 0.7);
      }
      
      /* ë‹¤í¬ëª¨ë“œ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
      .dark .custom-scrollbar:hover {
        -webkit-scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
        scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
      }
      
      .dark .custom-scrollbar:hover::-webkit-scrollbar-thumb {
        background: rgba(75, 85, 99, 0.5);
      }
      
      .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(75, 85, 99, 0.7);
      }
      
      /* ì „ì—­ í˜¸í™˜ì„± ì„¤ì • */
      body {
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        text-size-adjust: 100%;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      
      /* í…ìŠ¤íŠ¸ ì„ íƒ ê°€ëŠ¥í•œ ìš”ì†Œë“¤ */
      input, textarea, [contenteditable] {
        -webkit-user-select: text;
        -moz-user-select: text;
        -ms-user-select: text;
        user-select: text;
      }
      
      /* backdrop-filter í˜¸í™˜ì„± */
      .backdrop-blur {
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
      }
      
      .backdrop-blur-sm {
        -webkit-backdrop-filter: blur(4px);
        backdrop-filter: blur(4px);
      }
      
      .backdrop-blur-md {
        -webkit-backdrop-filter: blur(12px);
        backdrop-filter: blur(12px);
      }
      
      .backdrop-blur-lg {
        -webkit-backdrop-filter: blur(16px);
        backdrop-filter: blur(16px);
      }
      
      /* iOS PWA(í™ˆí™”ë©´ ì¶”ê°€)ì—ì„œ ë…¸ì¹˜/ìƒë‹¨ ê°€ë¦¼ ë°©ì§€: ì•ˆì „ì˜ì—­ ë°˜ì˜ */
      body.pwa-standalone {
        padding-top: constant(safe-area-inset-top);
        padding-top: env(safe-area-inset-top);
        padding-left: constant(safe-area-inset-left);
        padding-left: env(safe-area-inset-left);
        padding-right: constant(safe-area-inset-right);
        padding-right: env(safe-area-inset-right);
        padding-bottom: constant(safe-area-inset-bottom);
        padding-bottom: env(safe-area-inset-bottom);
      }

      /* React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì“¸ ìˆ˜ ìˆëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ (Tailwind ì—†ëŠ” í™˜ê²½ ëŒ€ë¹„) */
      .pt-safe { padding-top: env(safe-area-inset-top); }
      .pl-safe { padding-left: env(safe-area-inset-left); }
      .pr-safe { padding-right: env(safe-area-inset-right); }
      .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
      
      /* iPad Safari í˜¸í™˜ì„± */
      @supports (-webkit-touch-callout: none) {
        body {
          -webkit-text-size-adjust: 100%;
          -moz-text-size-adjust: 100%;
          -ms-text-size-adjust: 100%;
          text-size-adjust: 100%;
          -webkit-tap-highlight-color: transparent;
        }
        
        input, textarea, select {
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
          border-radius: 0;
        }
        
        button {
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
          border-radius: 0;
        }
      }
      
      /* iPad Safari viewport fix */
      @media screen and (min-width: 768px) and (max-width: 1024px) {
        body {
          -webkit-text-size-adjust: 100%;
          -moz-text-size-adjust: 100%;
          -ms-text-size-adjust: 100%;
          text-size-adjust: 100%;
        }
      }
      
      /* ì‹œê³„ ë°”ëŠ˜ ì• ë‹ˆë©”ì´ì…˜ */
      @keyframes clock-rotation {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .animate-clock-rotation {
        animation: clock-rotation 2s linear infinite;
      }
      
      /* íŒì—… ë©”ì‹œì§€ ì• ë‹ˆë©”ì´ì…˜ */
      @keyframes popup-fade-in {
        from { opacity: 0; transform: translateY(-20px) scale(0.9); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
      @keyframes popup-fade-out {
        from { opacity: 1; transform: translateY(0) scale(1); }
        to { opacity: 0; transform: translateY(-20px) scale(0.9); }
      }
      .animate-popup-in {
        animation: popup-fade-in 0.3s ease-out forwards;
      }
      .animate-popup-out {
        animation: popup-fade-out 0.3s ease-out forwards;
      }
      
      /* ContentEditable placeholder */
      [contenteditable] {
        outline: none;
        line-height: 1.5;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
      
      /* ë¶™ì—¬ë„£ê¸°ëœ ë‚´ìš© ìŠ¤íƒ€ì¼ ê°œì„  */
      [contenteditable] p {
        margin: 0.5em 0;
        line-height: 1.5;
      }
      
      [contenteditable] h1, [contenteditable] h2, [contenteditable] h3, 
      [contenteditable] h4, [contenteditable] h5, [contenteditable] h6 {
        margin: 0.8em 0 0.4em 0;
        font-weight: bold;
      }
      
      [contenteditable] strong, [contenteditable] b {
        font-weight: bold;
      }
      
      [contenteditable] em, [contenteditable] i {
        font-style: italic;
      }
      
      [contenteditable] u {
        text-decoration: underline;
      }
      
      [contenteditable]:empty:before {
        content: attr(data-placeholder);
        color: #9ca3af;
        pointer-events: none;
      }
      
      .dark [contenteditable]:empty:before {
        color: #6b7280;
      }
      
      /* ContentEditable ëª©ë¡ ìŠ¤íƒ€ì¼ */
      [contenteditable] ul {
        margin: 0;
        padding-left: 1.5rem;
        list-style-type: disc;
      }
      
      [contenteditable] li {
        margin: 0;
        line-height: 1.5;
      }
      
      [contenteditable] ul ul {
        margin: 0;
        padding-left: 1.5rem;
        list-style-type: circle;
      }
      
      [contenteditable] ul ul ul {
        margin: 0;
        list-style-type: square;
      }
      
      /* ContentEditable ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
      [contenteditable] img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
        border: 2px dashed transparent;
        transition: border-color 0.2s ease;
        position: relative;
        display: inline-block;
      }
      
      [contenteditable] img:hover {
        border-color: #3b82f6;
      }
      
      [contenteditable] img.selected {
        border-color: #3b82f6;
        border-style: solid;
      }
      
      /* ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ */
      .resize-handle {
        position: absolute;
        background: #3b82f6;
        border: 2px solid white;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        cursor: nw-resize;
        z-index: 10000;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }
      
      .resize-handle.se {
        bottom: -6px;
        right: -6px;
        cursor: se-resize;
      }
      
      .resize-handle.sw {
        bottom: -6px;
        left: -6px;
        cursor: sw-resize;
      }
      
      .resize-handle.ne {
        top: -6px;
        right: -6px;
        cursor: ne-resize;
      }
      
      .resize-handle.nw {
        top: -6px;
        left: -6px;
        cursor: nw-resize;
      }
      
      /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
      .image-container {
        position: relative;
        display: inline-block;
      }
      
      /* ì´ë¯¸ì§€ í¬ê¸° ì¡°ì ˆ ë²„íŠ¼ */
      .resize-controls {
        position: absolute !important;
        top: -40px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        display: flex !important;
        gap: 8px !important;
        background: rgba(0, 0, 0, 0.9) !important;
        padding: 8px 12px !important;
        border-radius: 25px !important;
        z-index: 10001 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
      }
      
      .resize-btn {
        background: #3b82f6 !important;
        color: white !important;
        border: none !important;
        width: 28px !important;
        height: 28px !important;
        border-radius: 50% !important;
        cursor: pointer !important;
        font-size: 16px !important;
        font-weight: bold !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        transition: all 0.2s ease !important;
        line-height: 1 !important;
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;
        user-select: none !important;
      }
      
      .resize-btn:hover {
        background: #2563eb !important;
        transform: scale(1.1) !important;
      }
      
      .resize-btn:active {
        background: #1d4ed8 !important;
        transform: scale(0.95) !important;
      }
      
      /* contentEditable placeholder */
      [contenteditable]:empty:before {
        content: attr(data-placeholder);
        color: #9ca3af;
        pointer-events: none;
      }
      
      .dark [contenteditable]:empty:before {
        color: #6b7280;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "react/": "https://esm.sh/react@^19.1.1/"
  }
}
</script>
<script>
// iPad Safari í˜¸í™˜ì„±ì„ ìœ„í•œ fallback
if (!window.customElements) {
  window.customElements = {
    define: function() {},
    get: function() { return undefined; },
    whenDefined: function() { return Promise.resolve(); }
  };
}
</script>

</head>
  <body class="bg-gray-100 dark:bg-gray-900 min-h-screen">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
    <script>
      // iOS PWA(í™ˆí™”ë©´ ì¶”ê°€) ê°ì§€ í›„ ì•ˆì „ì˜ì—­ íŒ¨ë”© ì ìš©
      (function() {
        const isIOS = /iphone|ipod|ipad/i.test(navigator.userAgent);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || (navigator.standalone === true);
        if (isIOS && isStandalone) {
          document.body.classList.add('pwa-standalone');
        }
      })();
    </script>
  </body>
</html>
