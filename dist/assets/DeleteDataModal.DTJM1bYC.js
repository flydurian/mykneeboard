import{r as x,R as m,j as e,X as M}from"./index.8oJwqbgR.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";import"./utils-vendor.Dc4w0XSH.js";const z=({isOpen:p,onClose:g,onDelete:f,flights:o,isDeleting:a})=>{const[d,j]=x.useState(new Date().getFullYear()),[l,y]=x.useState(new Date().getMonth()+1),[k,n]=x.useState(!1),c=m.useMemo(()=>{const r=new Set;return o.forEach(t=>{if(t.date){const s=new Date(t.date),u=s.getFullYear(),C=s.getMonth()+1;r.add(`${u}-${C}`)}}),Array.from(r).map(t=>{const[s,u]=t.split("-").map(Number);return{year:s,month:u}}).sort((t,s)=>t.year!==s.year?s.year-t.year:s.month-t.month)},[o]),N=m.useMemo(()=>{const r=new Set;return c.forEach(({year:t})=>r.add(t)),Array.from(r).sort((t,s)=>s-t)},[c]),i=m.useMemo(()=>c.filter(({year:r})=>r===d).map(({month:r})=>r).sort((r,t)=>t-r),[c,d]),h=m.useMemo(()=>o.filter(r=>{if(!r.date)return!1;const t=new Date(r.date);return t.getFullYear()===d&&t.getMonth()+1===l}).length,[o,d,l]);x.useEffect(()=>{i.length>0&&y(i[0])},[d,i]);const w=async()=>{await f(d,l),n(!1),g()},b=()=>{n(!1),g()};if(!p)return null;const v=r=>{r.target===r.currentTarget&&!a&&b()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 pt-safe",onClick:v,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"데이터 삭제"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:a,children:e.jsx(M,{className:"w-6 h-6"})})]}),k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"정말 삭제하시겠습니까?"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("span",{className:"font-semibold",children:[d,"년 ",l,"월"]}),"의 모든 데이터가 삭제됩니다."]}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"이 작업은 되돌릴 수 없습니다."})]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:a,children:"취소"}),e.jsxs("button",{onClick:w,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[a&&e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"삭제 중...":"삭제"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"삭제할 데이터의 년월을 선택하세요."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"년도"}),e.jsx("select",{value:d,onChange:r=>j(Number(r.target.value)),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a,children:N.map(r=>e.jsxs("option",{value:r,children:[r,"년"]},r))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"월"}),e.jsx("select",{value:l,onChange:r=>y(Number(r.target.value)),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a,children:i.map(r=>e.jsxs("option",{value:r,children:[r,"월"]},r))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["선택된 기간: ",e.jsxs("span",{className:"font-semibold",children:[d,"년 ",l,"월"]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["삭제될 데이터: ",e.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:[h,"개"]})]})]}),h===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"선택된 기간에 삭제할 데이터가 없습니다."})})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:a,children:"취소"}),e.jsx("button",{onClick:()=>n(!0),disabled:h===0||a,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"삭제하기"})]})]})]})})};export{z as default};
//# sourceMappingURL=DeleteDataModal.DTJM1bYC.js.map
