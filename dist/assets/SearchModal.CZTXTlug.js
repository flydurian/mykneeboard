import{r as h,j as e,a as M}from"./index.8oJwqbgR.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";import"./utils-vendor.Dc4w0XSH.js";const T=({isOpen:w,onClose:N,flights:y,onCityClick:m,onCrewClick:b})=>{const[n,p]=h.useState("city"),[x,f]=h.useState(""),[k,d]=h.useState([]),[C,g]=h.useState(!1);document.documentElement.classList.contains("dark");const E=t=>{if(!t.trim())return[];const l=t.toLowerCase(),c=[],i=new Map;return y.forEach(r=>{let a,s;if(r.route){const o=r.route.split(/[/\- ]/);o.length>=2?(a=o[0],s=o[1]):o.length===1&&o[0]!=="RESERVE"&&(a=o[0],s=null)}a=a||r.departure||r.origin,s=s||r.arrival||r.destination,[a,s].forEach(o=>{if(o&&o.trim()){const j=M(o.trim());if(j){const u=o.trim().toUpperCase();i.has(u)||i.set(u,{code:o.trim().toUpperCase(),name:j.name,flights:[]}),i.get(u).flights.push(r)}}})}),Array.from(i.values()).forEach(r=>{(r.code.toLowerCase().includes(l)||r.name.toLowerCase().includes(l))&&c.push(r)}),c.sort((r,a)=>a.flights.length-r.flights.length)},L=t=>{if(!t.trim())return[];const l=t.toLowerCase(),c=new Map;y.forEach(r=>{r.crew&&Array.isArray(r.crew)&&r.crew.forEach(a=>{const s=a.name||a.empl||"";s&&(c.has(s)||c.set(s,{name:a.name||"",empl:a.empl||"",rank:a.rank||"",flights:0}),c.get(s).flights++)})});const i=[];return Array.from(c.values()).forEach(r=>{const a=r.name.toLowerCase().includes(l),s=r.empl.toLowerCase().includes(l);(a||s)&&i.push(r)}),i.sort((r,a)=>a.flights-r.flights)},v=()=>{d(n==="city"?E(x):L(x)),g(!0)},S=()=>{f(""),d([]),g(!1),N()};return w?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-40 p-4 pt-safe",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:"검색"}),e.jsx("button",{onClick:S,className:"p-1 text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex w-full max-w-xs",children:[e.jsxs("button",{onClick:()=>{p("city"),d([]),g(!1)},className:`flex-1 px-4 py-2 text-sm font-medium transition-colors relative ${n==="city"?"text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["도시 검색",n==="city"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]}),e.jsxs("button",{onClick:()=>{p("crew"),d([]),g(!1)},className:`flex-1 px-4 py-2 text-sm font-medium transition-colors relative ${n==="crew"?"text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:["CREW 검색",n==="crew"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]})]})})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:n==="city"?"IATA code로 입력해주세요. 예) ICN, LAX..":"사번 또는 이름 입력",value:x,onChange:t=>{const l=t.target.value,c=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(l);f(c?l:l.toUpperCase()),d([]),g(!1)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700",onKeyPress:t=>t.key==="Enter"&&v()})}),e.jsx("button",{onClick:v,className:"w-full bg-blue-500 dark:bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors font-medium",children:"검색"})]}),C&&e.jsx("div",{className:"px-4 pb-4 max-h-96 overflow-y-auto border-t border-gray-200 dark:border-gray-600",children:k.length>0?e.jsx("div",{className:"space-y-3 pt-4",children:k.map((t,l)=>e.jsx("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer transition-colors",onClick:n==="city"&&m?()=>{m(t.code)}:n==="crew"&&b?()=>{b(t.name)}:void 0,children:n==="city"?e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-700 dark:text-gray-200",children:[t.code," - ",t.name]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.flights.length,"개 비행"]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-700 dark:text-gray-200",children:[t.name,"(",t.empl,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.rank," • ",t.flights,"개 비행"]})]})},l))}):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"검색 결과가 없습니다."})})]})}):null};export{T as default};
//# sourceMappingURL=SearchModal.CZTXTlug.js.map
