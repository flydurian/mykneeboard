import{j as t,X as j,i as N}from"./index.8oJwqbgR.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";import"./utils-vendor.Dc4w0XSH.js";const C=({data:n,onClose:g,onFlightClick:u})=>{if(!n)return null;const i=(()=>{const s={};(n.graphEvents||n.events).forEach(l=>{if(n.title==="이륙"?l.status.departed:l.status.landed){const x=new Date(l.date),e=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}`;s[e]=(s[e]||0)+1}});const d=[],h=new Date;for(let l=5;l>=0;l--){const r=new Date(h.getFullYear(),h.getMonth()-l,1),c=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;d.push({month:c,count:s[c]||0,displayMonth:`${r.getMonth()+1}월`})}return d})(),m=Math.max(...i.map(s=>s.count),1),p=()=>{if(i.length===0)return null;const r=i.map((e,a)=>{const y=30+a*240/(i.length-1),f=110-e.count/m*80;return{x:y,y:f,count:e.count}}),c=r.map((e,a)=>`${a===0?"M":"L"} ${e.x} ${e.y}`).join(" "),x=`${c} L ${r[r.length-1].x} 110 L ${r[0].x} 110 Z`;return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"월별횟수(최근6개월)"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.title})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("svg",{width:300,height:140,className:"mx-auto drop-shadow-sm",children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[t.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),t.jsx("stop",{offset:"50%",stopColor:"#8B5CF6"}),t.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]}),t.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.3"}),t.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0.05"})]}),t.jsxs("filter",{id:"glow",children:[t.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),[0,1,2,3,4].map(e=>t.jsx("line",{x1:30,y1:30+e*80/4,x2:270,y2:30+e*80/4,stroke:"currentColor",strokeWidth:"0.5",strokeDasharray:"2,2",className:"text-gray-200 dark:text-gray-700"},e)),t.jsx("path",{d:x,fill:"url(#areaGradient)"}),t.jsx("path",{d:c,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),r.map((e,a)=>t.jsxs("g",{children:[t.jsx("circle",{cx:e.x,cy:e.y,r:"5",fill:"white",stroke:"url(#lineGradient)",strokeWidth:"2",className:"drop-shadow-md"}),t.jsx("circle",{cx:e.x,cy:e.y,r:"2",fill:"url(#lineGradient)"}),t.jsx("text",{x:e.x,y:e.y-12,textAnchor:"middle",className:"text-xs font-semibold fill-current text-gray-700 dark:text-gray-200",children:e.count})]},a)),i.map((e,a)=>t.jsx("text",{x:30+a*240/(i.length-1),y:132,textAnchor:"middle",className:"text-xs font-medium fill-current text-gray-500 dark:text-gray-400",children:e.displayMonth},a))]}),t.jsxs("div",{className:"mt-3 flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:["최대: ",m,"회"]}),t.jsxs("span",{children:["총계: ",i.reduce((e,a)=>e+a.count,0),"회"]})]})]})]})};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4 pt-safe",onClick:g,children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md p-6 relative animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[t.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 dark:text-gray-300",children:t.jsx(j,{className:"w-6 h-6"})}),t.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:[n.title," 최근 이력"]}),n.events.length>0?t.jsxs(t.Fragment,{children:[p(),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"최근 기록"}),t.jsx("ul",{className:"space-y-2",children:n.events.sort((s,o)=>{const d=new Date(o.date).getTime()-new Date(s.date).getTime();if(d!==0)return d;if(s.departureDateTimeUtc&&o.departureDateTimeUtc)return new Date(o.departureDateTimeUtc).getTime()-new Date(s.departureDateTimeUtc).getTime();const h=parseInt(s.flightNumber.replace(/\D/g,""))||0;return(parseInt(o.flightNumber.replace(/\D/g,""))||0)-h}).slice(0,3).map(s=>t.jsxs("li",{className:"p-1.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors",onClick:()=>u(s),children:[t.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:s.date}),t.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[s.flightNumber,"편: ",s.route?s.route.replace("/"," → "):N(s)?"노선 정보 없음":s.flightNumber]})]},s.id))})]})]}):t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"최근 90일 내 기록이 없습니다."})]})})};export{C as default};
//# sourceMappingURL=CurrencyDetailModal.BpZH07qU.js.map
