{"version":3,"file":"LoginModal.DVoJK5ej.js","sources":["../../components/LoginModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { validateEmail, sanitizeInput } from '../utils/inputValidation';\n\ninterface LoginModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onLogin: (email: string, password: string) => void;\n  onShowRegister: () => void;\n  onResetPassword: (email: string) => Promise<{ success: boolean; error?: string }>;\n  isLoading?: boolean;\n  error?: string;\n}\n\nexport default function LoginModal({ \n  isOpen, \n  onClose, \n  onLogin, \n  onShowRegister, \n  onResetPassword,\n  isLoading = false, \n  error \n}: LoginModalProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isResetMode, setIsResetMode] = useState(false);\n  const [resetMessage, setResetMessage] = useState('');\n  const [resetError, setResetError] = useState('');\n\n  // 모달이 닫힐 때 상태 초기화\n  useEffect(() => {\n    if (!isOpen) {\n      setTimeout(() => {\n        setIsResetMode(false);\n        setResetMessage('');\n        setResetError('');\n        setEmail('');\n        setPassword('');\n      }, 300); // 애니메이션 시간 고려\n    }\n  }, [isOpen]);\n\n  const handleLoginSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // 입력값 정제 및 검증\n    const sanitizedEmail = sanitizeInput(email);\n    const sanitizedPassword = sanitizeInput(password);\n    \n    if (!validateEmail(sanitizedEmail)) {\n      return; // 이메일 형식이 잘못된 경우 로그인 시도하지 않음\n    }\n    \n    onLogin(sanitizedEmail, sanitizedPassword);\n  };\n\n  const handleResetSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setResetMessage('');\n    setResetError('');\n    const result = await onResetPassword(email);\n    if (result.success) {\n      setResetMessage('비밀번호 재설정 이메일을 보냈습니다. 받은 편지함을 확인해주세요.');\n    } else {\n      setResetError(result.error || '이메일 발송에 실패했습니다.');\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 pt-safe\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg p-8 w-full max-w-md mx-4\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">{isResetMode ? '비밀번호 찾기' : '로그인'}</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {isResetMode ? (\n          <form onSubmit={handleResetSubmit} className=\"space-y-4\">\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n              가입하신 이메일 주소를 입력하시면, 비밀번호를 재설정할 수 있는 링크를 보내드립니다.\n            </p>\n            <div>\n              <label htmlFor=\"reset-email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                이메일\n              </label>\n              <input\n                type=\"email\"\n                id=\"reset-email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"이메일을 입력하세요\"\n                autoComplete=\"email\"\n                style={{ touchAction: 'manipulation' }}\n                required\n              />\n            </div>\n\n            {resetMessage && (\n              <div className=\"text-green-700 dark:text-green-300 text-sm bg-green-50 dark:bg-green-900 p-3 rounded-md\">\n                {resetMessage}\n              </div>\n            )}\n            {resetError && (\n              <div className=\"text-red-600 dark:text-red-300 text-sm bg-red-50 dark:bg-red-900 p-3 rounded-md\">\n                {resetError}\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              재설정 이메일 보내기\n            </button>\n            <div className=\"text-center\">\n              <button\n                type=\"button\"\n                onClick={() => setIsResetMode(false)}\n                className=\"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\n              >\n                로그인으로 돌아가기\n              </button>\n            </div>\n          </form>\n        ) : (\n          <>\n            <form onSubmit={handleLoginSubmit} className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  이메일\n                </label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"이메일을 입력하세요\"\n                  autoComplete=\"email\"\n                  style={{ touchAction: 'manipulation' }}\n                  required\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  비밀번호\n                </label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"비밀번호를 입력하세요\"\n                  autoComplete=\"current-password\"\n                  style={{ touchAction: 'manipulation' }}\n                  required\n                />\n              </div>\n              \n              <div className=\"text-right\">\n                <button\n                  type=\"button\"\n                  onClick={() => setIsResetMode(true)}\n                  className=\"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-500 font-medium\"\n                >\n                  비밀번호를 잊으셨나요?\n                </button>\n              </div>\n\n              {error && (\n                <div className=\"text-red-600 dark:text-red-300 text-sm bg-red-50 dark:bg-red-900 p-3 rounded-md\">\n                  {error}\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {isLoading ? (\n                  <div className=\"flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    로그인 중...\n                  </div>\n                ) : (\n                  '로그인'\n                )}\n              </button>\n            </form>\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                계정이 없으신가요?{' '}\n                <button \n                  onClick={onShowRegister}\n                  className=\"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-500 font-medium\"\n                >\n                  회원가입\n                </button>\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["LoginModal","isOpen","onClose","onLogin","onShowRegister","onResetPassword","isLoading","error","email","setEmail","useState","password","setPassword","isResetMode","setIsResetMode","resetMessage","setResetMessage","resetError","setResetError","useEffect","handleLoginSubmit","e","sanitizedEmail","sanitizeInput","sanitizedPassword","validateEmail","handleResetSubmit","result","jsx","jsxs","Fragment"],"mappings":"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"}