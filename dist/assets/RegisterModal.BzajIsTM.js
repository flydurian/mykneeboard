const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.8oJwqbgR.js","assets/react-vendor.CdglivQu.js","assets/firebase-vendor.CQY7ULBN.js","assets/utils-vendor.Dc4w0XSH.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,_ as D}from"./index.8oJwqbgR.js";import{s as c,v as L,a as V,b as Z}from"./inputValidation.DMOJGhhe.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";import"./utils-vendor.Dc4w0XSH.js";const z=[{value:"OZ",label:"아시아나항공 (OZ)"},{value:"KE",label:"대한항공 (KE)"},{value:"7C",label:"제주항공 (7C)"}];function W({isOpen:T,onClose:_,onRegister:F,isLoading:m=!1,error:g}){const[x,b]=t.useState(""),[p,y]=t.useState(""),[f,h]=t.useState(""),[I,s]=t.useState(""),[n,v]=t.useState("OZ"),[k,j]=t.useState(""),[l,w]=t.useState(""),[N,a]=t.useState(""),C=t.useRef(null),q=r=>{r.preventDefault(),a("");const o=c(x),i=c(p),E=c(C.current?.value||I);if(!L(o)){a("올바른 이메일 주소를 입력해주세요.");return}const S=V(i);if(!S.isValid){a(S.errors[0]);return}if(i!==f){a("비밀번호가 일치하지 않습니다.");return}const P=Z(E);if(!P.isValid){a(P.errors[0]);return}const A=l.trim().toUpperCase();if(l&&!/^[A-Z]{3}$/.test(A)){a("BASE는 IATA 코드(세 글자)로 입력해주세요.");return}F(o,i,E,n,k);try{D(async()=>{const{indexedDBCache:u}=await import("./index.8oJwqbgR.js").then(B=>B.m);return{indexedDBCache:u}},__vite__mapDeps([0,1,2,3])).then(({indexedDBCache:u})=>{u.saveUserSettings("temp",{company:n,base:A||void 0})}).catch(()=>{})}catch{}},d=()=>{b(""),y(""),h(""),s(""),v("OZ"),j(""),w(""),a(""),_()};return T?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 pt-safe",onClick:d,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 w-full max-w-md mx-4",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"회원가입"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"사용자 이름 *"}),e.jsx("input",{ref:C,type:"text",id:"displayName",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"스케줄에 나오는 이름으로 적어주세요",onBlur:r=>s(r.target.value),onCompositionStart:r=>{r.currentTarget.dataset.composing="true"},onCompositionEnd:r=>{r.currentTarget.dataset.composing="false",s(r.currentTarget.value)},onInput:r=>{r.currentTarget.dataset.composing!=="true"&&s(r.currentTarget.value)},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"소속 회사 *"}),e.jsx("select",{id:"company",value:n,onChange:r=>v(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:z.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"base",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"BASE (IATA 코드)"}),e.jsx("input",{type:"text",id:"base",value:l,onChange:r=>{const o=r.target.value.toUpperCase().replace(/[^A-Z]/g,"").slice(0,3);w(o)},maxLength:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",placeholder:"IATA code로 입력해주세요 (예: ICN)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"empl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"EMPL *"}),e.jsx("input",{type:"text",id:"empl",value:k,onChange:r=>j(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"EMPL을 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"이메일 *"}),e.jsx("input",{type:"email",id:"email",value:x,onChange:r=>b(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"이메일을 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"비밀번호 *"}),e.jsx("input",{type:"password",id:"password",value:p,onChange:r=>y(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"6자 이상의 비밀번호를 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"비밀번호 확인 *"}),e.jsx("input",{type:"password",id:"confirmPassword",value:f,onChange:r=>h(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"비밀번호를 다시 입력하세요",required:!0})]}),(N||g)&&e.jsx("div",{className:"text-red-600 dark:text-red-300 text-sm bg-red-50 dark:bg-red-900 p-3 rounded-md",children:N||g}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"회원가입 중..."]}):"회원가입"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["이미 계정이 있으신가요?"," ",e.jsx("button",{onClick:d,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-500 font-medium",children:"로그인"})]})})]})}):null}export{W as default};
//# sourceMappingURL=RegisterModal.BzajIsTM.js.map
