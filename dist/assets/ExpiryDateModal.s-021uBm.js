import{r as g,j as e,R as Q,X as _}from"./index.8oJwqbgR.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";import"./utils-vendor.Dc4w0XSH.js";const ee=({value:b,onChange:v,min:C,className:z="",placeholder:S="날짜 선택",triggerRef:p,theme:M="system"})=>{const[x,d]=g.useState(!1),[r,u]=g.useState(new Date),[y,k]=g.useState(null),[f,j]=g.useState(!1),[m,D]=g.useState(!1),a=M==="dark"||M==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;g.useEffect(()=>{b&&k(new Date(b))},[b]),g.useEffect(()=>{const t=s=>{(f||m)&&(s.target.closest(".date-picker-dropdown")||(j(!1),D(!1)))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[f,m]);const n=new Date,c=C?new Date(C+"T00:00:00"):new Date(n.getFullYear(),n.getMonth(),n.getDate()),N=t=>new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),H=t=>new Date(t.getFullYear(),t.getMonth(),1).getDay(),A=t=>new Date(t.getFullYear(),t.getMonth(),0).getDate(),w=t=>{const s=new Date(t.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),o=s.getFullYear(),h=String(s.getMonth()+1).padStart(2,"0"),$=String(s.getDate()).padStart(2,"0");return`${o}-${h}-${$}`},Y=t=>{const s=new Date(t.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),o=new Date(c.toLocaleString("en-US",{timeZone:"Asia/Seoul"}));s<o||(k(t),v(w(t)),d(!1))},B=()=>{u(new Date(r.getFullYear(),r.getMonth()-1,1))},P=()=>{u(new Date(r.getFullYear(),r.getMonth()+1,1))},U=()=>{const t=new Date(n.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());s>=c&&Y(s)},E=()=>{k(null),v(""),d(!1)},T=t=>{u(new Date(r.getFullYear(),t,1)),j(!1)},V=t=>{u(new Date(t,r.getMonth(),1)),D(!1)},I=()=>{const t=new Date().getFullYear(),s=[];for(let o=t;o<=t+20;o++)s.push(o);return s},W=()=>{if(!p?.current)return"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2";const t=p.current.getBoundingClientRect(),s=window.innerWidth,o=360,h=Math.max(20,t.top-420),$=t.left+t.width/2,R=Math.max(20,Math.min($-o/2,s-o-20));return`fixed top-${h}px left-${R}px`},Z=()=>{const t=N(r),s=H(r),o=A(r),h=[];for(let l=s-1;l>=0;l--){const i=o-l;new Date(Date.UTC(r.getFullYear(),r.getMonth()-1,i)),h.push(e.jsx("button",{className:`w-8 h-8 text-sm ${a?"text-gray-600":"text-gray-400"}`,disabled:!0,children:i},`prev-${i}`))}for(let l=1;l<=t;l++){const i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),l)),X=w(i)===w(n),q=y&&w(i)===w(y),G=new Date(i.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),J=new Date(c.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),L=G<J,K=i.getDay()===0||i.getDay()===6;h.push(e.jsx("button",{onClick:()=>Y(i),disabled:L,className:`w-8 h-8 text-sm rounded-full transition-colors ${q?"bg-blue-600 text-white":X?a?"bg-blue-900 text-blue-400 font-semibold":"bg-blue-100 text-blue-600 font-semibold":L?a?"text-gray-700 cursor-not-allowed":"text-gray-300 cursor-not-allowed":K?a?"text-red-400 hover:bg-red-900/20":"text-red-500 hover:bg-red-50":a?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:l},l))}const R=42-h.length;for(let l=1;l<=R;l++)h.push(e.jsx("button",{className:`w-8 h-8 text-sm ${a?"text-gray-600":"text-gray-400"}`,disabled:!0,children:l},`next-${l}`));return h},O=["일","월","화","수","목","금","토"],F=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];return e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>d(!x),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm sm:text-base text-left ${z}`,children:y?w(y):S}),x&&e.jsxs("div",{className:`${W()} ${a?"bg-gray-800 border-gray-600":"bg-white border-gray-300"} rounded-lg shadow-xl z-50 p-4 w-[360px] max-w-[90vw] relative`,children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 pr-8",children:[e.jsxs("div",{className:"flex items-center gap-2 relative date-picker-dropdown",children:[e.jsxs("button",{onClick:()=>D(!m),className:`font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded transition-colors ${a?"text-white":"text-gray-800"}`,children:[r.getFullYear(),"년"]}),e.jsx("button",{onClick:()=>j(!f),className:`font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded transition-colors ${a?"text-white":"text-gray-800"}`,children:F[r.getMonth()]}),m&&e.jsx("div",{className:`absolute top-10 left-0 z-10 ${a?"bg-gray-800 border-gray-600":"bg-white border-gray-300"} border rounded-lg shadow-lg p-2 max-h-40 overflow-y-auto`,style:{scrollbarWidth:"thin",scrollbarColor:a?"#6B7280 transparent":"#9CA3AF transparent"},children:I().map(t=>e.jsxs("button",{onClick:()=>V(t),className:`w-full text-left px-3 py-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t===r.getFullYear()?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":a?"text-white":"text-gray-800"}`,children:[t,"년"]},t))}),f&&e.jsx("div",{className:`absolute top-10 left-16 z-10 ${a?"bg-gray-800 border-gray-600":"bg-white border-gray-300"} border rounded-lg shadow-lg p-2 max-h-40 overflow-y-auto min-w-[80px]`,style:{scrollbarWidth:"thin",scrollbarColor:a?"#6B7280 transparent":"#9CA3AF transparent"},children:F.map((t,s)=>e.jsx("button",{onClick:()=>T(s),className:`w-full text-left px-3 py-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap ${s===r.getMonth()?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":a?"text-white":"text-gray-800"}`,children:t},s))})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:B,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:P,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:O.map(t=>e.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs font-medium ${a?"text-gray-400":"text-gray-500"}`,children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Z()}),e.jsx("div",{className:"flex justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:E,className:"text-blue-600 dark:text-blue-400 text-sm hover:underline",children:"지우기"}),e.jsx("button",{onClick:U,className:"text-blue-600 dark:text-blue-400 text-sm hover:underline",children:"오늘"})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50",onClick:()=>d(!1)})]})},le=({isOpen:b,onClose:v,onSave:C,cardType:z,cardName:S,currentExpiryDate:p,theme:M="system"})=>{const[x,d]=g.useState(""),[r,u]=g.useState(!0),y=Q.useRef(null),k=()=>{const a=new Date,n=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),N=String(a.getDate()).padStart(2,"0");return`${n}-${c}-${N}`};g.useEffect(()=>{if(b)if(p)d(p);else{const a=new Date,n=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),N=String(a.getDate()).padStart(2,"0");d(`${n}-${c}-${N}`)}},[b,p]);const f=a=>{if(d(a),a){const n=new Date(a),c=new Date;c.setHours(0,0,0,0),u(n>=c)}else u(!0)},j=()=>{x&&r&&(C(x),v())},m=()=>{d(""),u(!0),v()},D=a=>{switch(a){case"passport":return e.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"visa":return e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"epta":return e.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})});case"radio":return e.jsx("svg",{className:"w-6 h-6 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM15.657 6.343a1 1 0 011.414 0A9.972 9.972 0 0119 12a9.972 9.972 0 01-1.929 5.657 1 1 0 11-1.414-1.414A7.971 7.971 0 0017 12a7.971 7.971 0 00-1.343-4.243 1 1 0 010-1.414z",clipRule:"evenodd"})});case"whitecard":return e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}};return b?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-2 sm:p-4 pt-safe",onClick:m,children:e.jsxs("div",{ref:y,className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-sm sm:max-w-md p-4 sm:p-6 relative animate-fade-in-up max-h-[90vh] overflow-y-auto",style:{height:"auto",minHeight:"280px"},onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:m,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-3 sm:mb-4",children:[e.jsx("div",{className:"flex justify-center mb-2 sm:mb-3",children:D(z)}),e.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white mb-1",children:[S," 만기일 설정"]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[S,"의 만료일을 입력하세요."]})]}),e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"만료일"}),e.jsx(ee,{value:x,onChange:f,min:k(),placeholder:"만료일을 선택하세요",triggerRef:y,theme:M,className:`${r?"border-gray-300 dark:border-gray-600":"border-red-500 focus:ring-red-500"}`}),!r&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:"과거 날짜는 선택할 수 없습니다."})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 mt-2",children:[e.jsx("button",{onClick:m,className:"flex-1 px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"취소"}),e.jsx("button",{onClick:j,disabled:!x||!r,className:"flex-1 px-3 sm:px-4 py-2 text-sm sm:text-base bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:"저장"})]})]})}):null};export{le as default};
//# sourceMappingURL=ExpiryDateModal.s-021uBm.js.map
