import{r as E,j as o,X as Y}from"./index.8oJwqbgR.js";import{h as G,i as $,j as O}from"./utils-vendor.Dc4w0XSH.js";import"./react-vendor.CdglivQu.js";import"./firebase-vendor.CQY7ULBN.js";const R={2024:new Set(["01-01","02-09","02-10","02-11","02-12","03-01","04-10","05-05","05-06","05-15","06-06","08-15","09-16","09-17","09-18","10-03","10-09","12-25"]),2025:new Set(["01-01","01-28","01-29","01-30","03-01","03-03","05-05","05-06","06-06","08-15","10-03","10-05","10-06","10-07","10-08","10-09","12-25"]),2026:new Set(["01-01","02-16","02-17","02-18","03-01","05-05","05-25","06-06","08-15","09-24","09-25","09-26","10-03","10-09","12-25"])},H=f=>{const y=G(f),U=$(f)+1,c=O(f),u=R[y];if(!u)return!1;const D=`${String(U).padStart(2,"0")}-${String(c).padStart(2,"0")}`;return u.has(D)},P=({isOpen:f,onClose:y,flights:U,month:c,year:u,onFlightClick:D,onMonthChange:S})=>{const T=E.useMemo(()=>{const s=[];U.forEach(e=>{const d=e.flightNumber.includes("STBY")||e.flightNumber.includes("OTHRDUTY")||e.flightNumber.includes("RESERVE"),g=e.flightNumber.toUpperCase().includes("SIM"),p=e.flightNumber.toUpperCase().includes("ANNUAL LEAVE")||e.flightNumber.toUpperCase().includes("ALV")||e.flightNumber.toUpperCase().includes("ALM")||e.flightNumber.toUpperCase().includes("VAC_R")||e.flightNumber.toUpperCase().includes("VAC"),h=e.flightNumber.toUpperCase().includes("G/S STUDENT")||e.flightNumber.toUpperCase().includes("GS STUDENT")||e.flightNumber.toUpperCase().includes("G/S")||e.flightNumber.toUpperCase().includes("GS")||e.flightNumber.toUpperCase().includes("GROUND SCHOOL")||e.flightNumber.toUpperCase().includes("MEDICAL CHK")||e.flightNumber.toUpperCase().includes("MEDICAL")||e.flightNumber.toUpperCase().includes("안전회의")||e.flightNumber.toUpperCase().includes("SAFETY")||e.flightNumber.toUpperCase().includes("TRAINING")||e.flightNumber.toUpperCase().includes("교육")||e.flightNumber.toUpperCase().includes("BRIEFING")||e.flightNumber.toUpperCase().includes("브리핑")||e.flightNumber.toUpperCase().includes("MEETING")||e.flightNumber.toUpperCase().includes("회의")||e.flightNumber.toUpperCase().includes("CHECK")||e.flightNumber.toUpperCase().includes("점검")||e.flightNumber.toUpperCase().includes("INSPECTION")||e.flightNumber.toUpperCase().includes("검사");let n;if(e.route){const l=e.route.split("/")[1];l?n=l:n=e.flightNumber}else p?n=e.flightNumber:d?n="STBY":n=e.flightNumber;const b=new Set;if(p||h||g)e.date&&b.add(e.date);else{if(e.departureDateTimeUtc){const l=new Date(e.departureDateTimeUtc),r=new Date(l.getTime()+540*60*1e3),a=r.getUTCFullYear(),m=String(r.getUTCMonth()+1).padStart(2,"0"),N=String(r.getUTCDate()).padStart(2,"0"),C=`${a}-${m}-${N}`;b.add(C)}if(e.arrivalDateTimeUtc){const l=new Date(e.arrivalDateTimeUtc),r=new Date(l.getTime()+540*60*1e3),a=r.getUTCFullYear(),m=String(r.getUTCMonth()+1).padStart(2,"0"),N=String(r.getUTCDate()).padStart(2,"0"),C=`${a}-${m}-${N}`;b.add(C)}}b.forEach(l=>{s.push({title:n,date:l,flight:e})})});const i=s.reduce((e,d)=>(e[d.date]||(e[d.date]=[]),e[d.date].push(d),e),{});Object.keys(i).forEach(e=>{i[e].sort((d,g)=>{const p=d.flight.std||"00:00",h=g.flight.std||"00:00";return p.localeCompare(h)})});const t=[];return Object.keys(i).sort().forEach(e=>{t.push(...i[e])}),t},[U]),w=E.useMemo(()=>{const s=new Date(u,c-1,1),i=new Date(u,c,0),t=s.getDay();i.getDay();const e=i.getDate(),d=1-t,g=Math.abs(d)+e,p=Math.ceil(g/7),h=[];for(let n=0;n<p*7;n++){const b=d+n;let l=u,r=c-1,a=b;if(a<=0)r--,r<0&&(r=11,l--),a=new Date(l,r+1,0).getDate()+a;else{const x=new Date(l,r+1,0).getDate();a>x&&(a=a-x,r++,r>11&&(r=0,l++))}const m=`${l}-${String(r+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,N=T.filter(x=>x.date===m),C=l===u&&r===c-1,k=new Date(l,r,a).getDay(),j=k===0,A=k===6,L=H(new Date(l,r,a));h.push({day:a,dateStr:m,isCurrentMonth:C,isSunday:j,isSaturday:A,isHoliday:L,events:N})}return h},[u,c,T]),M=()=>{if(S){let s=u,i=c-1;i<1&&(i=12,s--),S(s,i)}},I=()=>{if(S){let s=u,i=c+1;i>12&&(i=1,s++),S(s,i)}};return f?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4 pt-safe",onClick:y,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-4xl p-6 relative animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"absolute top-4 right-16 flex gap-2",children:[o.jsx("button",{onClick:M,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",title:"이전 달",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{onClick:I,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",title:"다음 달",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),o.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(Y,{className:"w-6 h-6"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:[u,"년 ",c,"월"]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["일","월","화","수","목","금","토"].map((s,i)=>{const t=i===0,e=i===6;return o.jsx("div",{className:`
                                    text-center text-sm font-medium py-2 border border-gray-200 dark:border-gray-700 rounded-lg
                                    ${t?"bg-red-50/30 dark:bg-red-900/20 text-red-600 dark:text-red-400":e?"bg-blue-50/30 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}
                                `,children:s},s)})}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:w.map((s,i)=>o.jsxs("div",{className:`
                                min-h-[60px] sm:min-h-[80px] md:min-h-[100px] lg:min-h-[120px] p-1 sm:p-2 border border-gray-200 dark:border-gray-700 rounded-lg
                                ${s.isCurrentMonth?s.isHoliday||s.isSunday?"bg-red-50/30 dark:bg-red-900/20 text-red-600 dark:text-red-400":s.isSaturday?"bg-blue-50/30 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100":"bg-gray-50 dark:bg-gray-900 text-gray-400 dark:text-gray-600"}
                                ${(()=>{const t=new Date,e=new Date(t.getTime()+540*60*1e3),d=e.getUTCFullYear(),g=e.getUTCMonth()+1,p=e.getUTCDate();return s.day===p&&u===d&&c===g&&s.isCurrentMonth?"ring-2 ring-fuchsia-500":""})()}
                            `,children:[o.jsx("div",{className:"text-xs sm:text-sm md:text-base font-medium mb-1",children:s.day}),o.jsx("div",{className:"space-y-0.5 sm:space-y-1",children:s.events.map((t,e)=>{const d=t.flight.flightNumber.includes("STBY")||t.flight.flightNumber.includes("OTHRDUTY")||t.flight.flightNumber.includes("RESERVE")||t.flight.scheduleType==="STANDBY",g=t.flight.flightNumber.toUpperCase().includes("SIM"),p=t.flight.flightNumber.toUpperCase().includes("ANNUAL LEAVE")||t.flight.flightNumber.toUpperCase().includes("ALV")||t.flight.flightNumber.toUpperCase().includes("ALM")||t.flight.flightNumber.toUpperCase().includes("VAC_R")||t.flight.flightNumber.toUpperCase().includes("VAC"),h=t.flight.flightNumber.toUpperCase().includes("G/S STUDENT")||t.flight.flightNumber.toUpperCase().includes("GS STUDENT")||t.flight.flightNumber.toUpperCase().includes("G/S")||t.flight.flightNumber.toUpperCase().includes("GS")||t.flight.flightNumber.toUpperCase().includes("GROUND SCHOOL")||t.flight.flightNumber.toUpperCase().includes("MEDICAL CHK")||t.flight.flightNumber.toUpperCase().includes("MEDICAL")||t.flight.flightNumber.toUpperCase().includes("안전회의")||t.flight.flightNumber.toUpperCase().includes("SAFETY")||t.flight.flightNumber.toUpperCase().includes("TRAINING")||t.flight.flightNumber.toUpperCase().includes("교육")||t.flight.flightNumber.toUpperCase().includes("BRIEFING")||t.flight.flightNumber.toUpperCase().includes("브리핑")||t.flight.flightNumber.toUpperCase().includes("MEETING")||t.flight.flightNumber.toUpperCase().includes("회의")||t.flight.flightNumber.toUpperCase().includes("CHECK")||t.flight.flightNumber.toUpperCase().includes("점검")||t.flight.flightNumber.toUpperCase().includes("INSPECTION")||t.flight.flightNumber.toUpperCase().includes("검사"),n=t.flight.flightNumber.startsWith("KE")||t.flight.flightNumber.match(/^\d+$/)&&t.flight.scheduleType==="FLIGHT",b=t.flight.scheduleType==="OZ"||t.flight.flightNumber.match(/^\d+$/)&&t.flight.scheduleType!=="7C"&&t.flight.scheduleType!=="FLIGHT"||t.flight.flightNumber.toUpperCase().includes("FIXED SKD")||t.flight.flightNumber.toUpperCase().includes("ORAL"),l=t.flight.scheduleType==="7C"&&!h&&!g&&!p;let r,a;return p?(r="bg-red-500",a="hover:bg-red-600"):d?(r="bg-yellow-600",a="hover:bg-yellow-700"):g?(r="bg-green-600",a="hover:bg-green-700"):h?(r="bg-purple-600",a="hover:bg-purple-700"):l?(r="bg-orange-500",a="hover:bg-orange-600"):b?(r="bg-blue-700",a="hover:bg-blue-800"):n?(r="bg-sky-500",a="hover:bg-sky-600"):(r="bg-gray-500",a="hover:bg-gray-600"),o.jsx("div",{className:`text-[10px] sm:text-xs md:text-sm lg:text-sm xl:text-sm ${r} ${a} text-white px-1 sm:px-2 py-1 rounded cursor-pointer break-words leading-tight`,onClick:()=>D(t.flight),title:t.title,children:t.title},e)})})]},i))})]})}):null};export{P as default};
//# sourceMappingURL=CalendarModal.QUJsUTOc.js.map
