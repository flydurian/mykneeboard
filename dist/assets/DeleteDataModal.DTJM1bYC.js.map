{"version":3,"file":"DeleteDataModal.DTJM1bYC.js","sources":["../../components/modals/DeleteDataModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { XIcon } from '../icons';\n\ninterface DeleteDataModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onDelete: (year: number, month: number) => Promise<void>;\n  flights: any[];\n  isDeleting: boolean;\n}\n\nconst DeleteDataModal: React.FC<DeleteDataModalProps> = ({\n  isOpen,\n  onClose,\n  onDelete,\n  flights,\n  isDeleting\n}) => {\n  const [selectedYear, setSelectedYear] = useState<number>(new Date().getFullYear());\n  const [selectedMonth, setSelectedMonth] = useState<number>(new Date().getMonth() + 1);\n  const [showConfirm, setShowConfirm] = useState(false);\n\n  // 사용 가능한 년월 목록 생성\n  const availableMonths = React.useMemo(() => {\n    const monthSet = new Set<string>();\n    flights.forEach(flight => {\n      if (flight.date) {\n        const date = new Date(flight.date);\n        const year = date.getFullYear();\n        const month = date.getMonth() + 1;\n        monthSet.add(`${year}-${month}`);\n      }\n    });\n    \n    return Array.from(monthSet)\n      .map(dateStr => {\n        const [year, month] = dateStr.split('-').map(Number);\n        return { year, month };\n      })\n      .sort((a, b) => {\n        if (a.year !== b.year) return b.year - a.year;\n        return b.month - a.month;\n      });\n  }, [flights]);\n\n  // 년도 목록 생성\n  const availableYears = React.useMemo(() => {\n    const yearSet = new Set<number>();\n    availableMonths.forEach(({ year }) => yearSet.add(year));\n    return Array.from(yearSet).sort((a, b) => b - a);\n  }, [availableMonths]);\n\n  // 선택된 년도에 해당하는 월 목록\n  const availableMonthsForYear = React.useMemo(() => {\n    return availableMonths\n      .filter(({ year }) => year === selectedYear)\n      .map(({ month }) => month)\n      .sort((a, b) => b - a);\n  }, [availableMonths, selectedYear]);\n\n  // 선택된 년월의 데이터 개수\n  const selectedDataCount = React.useMemo(() => {\n    return flights.filter(flight => {\n      if (!flight.date) return false;\n      const date = new Date(flight.date);\n      return date.getFullYear() === selectedYear && date.getMonth() + 1 === selectedMonth;\n    }).length;\n  }, [flights, selectedYear, selectedMonth]);\n\n  // 년도 변경 시 월 초기화\n  useEffect(() => {\n    if (availableMonthsForYear.length > 0) {\n      setSelectedMonth(availableMonthsForYear[0]);\n    }\n  }, [selectedYear, availableMonthsForYear]);\n\n  const handleDelete = async () => {\n    await onDelete(selectedYear, selectedMonth);\n    setShowConfirm(false);\n    onClose();\n  };\n\n  const handleClose = () => {\n    setShowConfirm(false);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget && !isDeleting) {\n      handleClose();\n    }\n  };\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 pt-safe\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n            데이터 삭제\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            disabled={isDeleting}\n          >\n            <XIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {!showConfirm ? (\n          <>\n            {/* Content */}\n            <div className=\"p-6\">\n              <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n                삭제할 데이터의 년월을 선택하세요.\n              </p>\n\n              {/* Year Selection */}\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  년도\n                </label>\n                <select\n                  value={selectedYear}\n                  onChange={(e) => setSelectedYear(Number(e.target.value))}\n                  className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  disabled={isDeleting}\n                >\n                  {availableYears.map(year => (\n                    <option key={year} value={year}>\n                      {year}년\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Month Selection */}\n              <div className=\"mb-6\">\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  월\n                </label>\n                <select\n                  value={selectedMonth}\n                  onChange={(e) => setSelectedMonth(Number(e.target.value))}\n                  className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  disabled={isDeleting}\n                >\n                  {availableMonthsForYear.map(month => (\n                    <option key={month} value={month}>\n                      {month}월\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Data Count */}\n              <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  선택된 기간: <span className=\"font-semibold\">{selectedYear}년 {selectedMonth}월</span>\n                </p>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                  삭제될 데이터: <span className=\"font-semibold text-red-600 dark:text-red-400\">{selectedDataCount}개</span>\n                </p>\n              </div>\n\n              {selectedDataCount === 0 && (\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6\">\n                  <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                    선택된 기간에 삭제할 데이터가 없습니다.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700\">\n              <button\n                onClick={handleClose}\n                className=\"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors\"\n                disabled={isDeleting}\n              >\n                취소\n              </button>\n              <button\n                onClick={() => setShowConfirm(true)}\n                disabled={selectedDataCount === 0 || isDeleting}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                삭제하기\n              </button>\n            </div>\n          </>\n        ) : (\n          <>\n            {/* Confirmation */}\n            <div className=\"p-6\">\n              <div className=\"text-center\">\n                <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4\">\n                  <svg className=\"h-6 w-6 text-red-600 dark:text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                  정말 삭제하시겠습니까?\n                </h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n                  <span className=\"font-semibold\">{selectedYear}년 {selectedMonth}월</span>의 모든 데이터가 삭제됩니다.\n                </p>\n                <p className=\"text-sm text-red-600 dark:text-red-400 font-medium\">\n                  이 작업은 되돌릴 수 없습니다.\n                </p>\n              </div>\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700\">\n              <button\n                onClick={() => setShowConfirm(false)}\n                className=\"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors\"\n                disabled={isDeleting}\n              >\n                취소\n              </button>\n              <button\n                onClick={handleDelete}\n                disabled={isDeleting}\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {isDeleting && (\n                  <svg className=\"animate-spin h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                )}\n                {isDeleting ? '삭제 중...' : '삭제'}\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DeleteDataModal;\n"],"names":["DeleteDataModal","isOpen","onClose","onDelete","flights","isDeleting","selectedYear","setSelectedYear","useState","selectedMonth","setSelectedMonth","showConfirm","setShowConfirm","availableMonths","React","monthSet","flight","date","year","month","dateStr","a","b","availableYears","yearSet","availableMonthsForYear","selectedDataCount","useEffect","handleDelete","handleClose","handleBackdropClick","e","jsx","jsxs","XIcon","Fragment"],"mappings":"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"}