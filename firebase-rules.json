{
  "rules": {
    "users": {
      "$uid": {
        ".read": "auth !== null && auth.uid === $uid",
        ".write": "auth !== null && auth.uid === $uid",
        ".validate": "auth.uid === $uid",
        
        "flights": {
          "$year": {
            "$month": {
              "$flightId": {
                ".validate": "newData.hasChildren(['date', 'departure', 'arrival', 'airline', 'flightNumber']) && newData.child('date').isString() && newData.child('departure').isString() && newData.child('arrival').isString() && newData.child('airline').isString() && newData.child('flightNumber').isString()"
              }
            }
          }
        },
        
        "settings": {
          ".validate": "newData.hasChildren(['airline']) && newData.child('airline').isString() && (newData.child('airline').val() === 'OZ' || newData.child('airline').val() === 'KE')"
        },
        
        "documentExpiryDates": {
          "$documentType": {
            ".validate": "newData.isString() && newData.val().length() > 0"
          }
        },
        
        "crewMemos": {
          "$crewName": {
            ".validate": "newData.isString() && newData.val().length() > 0"
          }
        },
        
        "cityMemos": {
          "$cityCode": {
            ".validate": "newData.isString() && newData.val().length() > 0"
          }
        }
      }
    }
  }
}
